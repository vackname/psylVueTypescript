var wSocket=function(uri){this.uri=uri;this.obj=null};wSocket.prototype.input=function(s){console.log(s)};wSocket.prototype.connect=function(){var $t=this;var wSocketFun=function(){$t.socket=new WebSocket($t.uri);$t.socket.onopen=function(e){if(e!=undefined){$t.input({error:"connect",mes:"opened",obj:e,t:pb.unixReNow()})}};$t.socket.onclose=function(e){if(e!=undefined){$t.input({error:"close",mes:"closed",obj:e})}};$t.socket.onmessage=function(e){if(e!=undefined){$t.input({error:"received",mes:e.data,obj:e})}else{$t.input({error:"messageLoss",mes:e.data,obj:e})}};$t.socket.onerror=function(e){if(e!=undefined){$t.input({error:"error",mes:e.data,obj:e,t:pb.unixReNow()})}pb.LogindelCookie("WSCookieKey")}};wSocketFun()};wSocket.prototype.sendMes=function(text){this.input({error:"send",mes:text,obj:{e:"empty"},t:pb.unixReNow()});this.socket.send(text)};
